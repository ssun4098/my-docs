# EntityManagerFactory
- EntityManger를 생성한다.
- 여러 스래드에서 접근 할 수 있다.
- 생성에 많은 비용이 발생해 어플리케이션 당 하나의 팩토리가 존재한다.


# EntityManger
- 데이터베이스에 접근하기 위한 객체
- 사용 후 close 해줘야 자원 누수가 발생하지 않음
- Thread Safe 하지 않기 때문에 동시성 문제에 주의해야한다.

# 영속성 컨텍스트
- 엔티티를 영구히 저장하는 장소
- 엔티티 매니저가 엔티티를 저장이나 조회 후 영속성 컨텍스트에 보관하고 관리한다.

## 영속성 컨텍스트의 특징
- 영속성 컨텍스트와 식별자 값: key-value 형태라 식별자 값이 반드시 필요하다.
- 영속성 컨텍스트와 DB 저장: JPA는 보통 트랜잭션을 커밋하는 순간 반영하는데 이것을 플러시라고 한다.
- 1차 캐시: 영속성 컨텍스트에 저장되어 DB 접근을 줄일 수 있다. 엔티티가 쌓이면 메모리 사용량이 증가할 수 있다. 
- 동일성 보장
- 트랜잭션을 지원하는 쓰기 지연: 변경 사항을 모아서 일괄 처리하여 성능 최적화에 유리하지만 트랜잭션 중간에 강제 플러시가 발생할 경우, 예상치 못하게 DB 반영이 일어날 수 있다.
- 변경 감지: JPA가 자동으로 변경을 처리해줘 일관성을 유지할 수 있지만 대규모 데이터의 경우 성능 부담이 있을 수 있다.
- 지연 로딩: 초기 로딩 시 불필요한 데이터를 가져오지 않아 빠르며 메모리를 아낄 수 있지만 N + 1문제나 엔티티 접근 시 예상치 못한 쿼리가 발생할 수 있다.